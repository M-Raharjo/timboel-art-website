{{ define "main" }}
<main class="collections">
  <h1 style="text-align: center; padding: 0 2rem;">{{ .Title }}</h1>
  {{ with .Content }}<div class="content">{{ . }}</div>{{ end }}

  {{ if .Sections }}
    <section>
      <div class="grid">
        {{ range sort .Sections "Weight" "Title" }}
          {{ $thumb := .Params.featured_image }}
          {{ if not $thumb }}
            {{ with (first 1 (.Resources.ByType "image")) }}
              {{ $thumb = (index . 0).RelPermalink }}
            {{ end }}
          {{ end }}
          {{ if not $thumb }}
            {{ $thumb = printf "https://placehold.co/600x600?text=%s" (urlquery .LinkTitle) }}
          {{ end }}

          <div>
            <a href="{{ .RelPermalink }}">
              <img src="{{ $thumb }}" alt="{{ .LinkTitle }}" loading="lazy">
              <div><h3>{{ .LinkTitle }}</h3></div>
              {{ with .Params.description }}<div>{{ . }}</div>{{ end }}
            </a>
          </div>
        {{ end }}
      </div>
    </section>

  {{ else if .RegularPages }}
    <section>
      <div class="grid">
        {{ range sort .RegularPages "Weight" "Title" }}
          {{ $thumb := .Params.featured_image }}
          {{ if not $thumb }}
            {{ with (first 1 (.Resources.ByType "image")) }}
              {{ $thumb = (index . 0).RelPermalink }}
            {{ end }}
          {{ end }}
          {{ if not $thumb }}
            {{ $thumb = printf "https://placehold.co/600x600?text=%s" (urlquery (or .Params.internal_name .LinkTitle)) }}
          {{ end }}

          <div>
            <a href="{{ .RelPermalink }}">
              <img src="{{ $thumb }}" alt="{{ .LinkTitle }}" loading="lazy">
              <div><h3>{{ .LinkTitle }}</h3></div>
              <div>{{ .Summary }}</div>
            </a>
          </div>
        {{ end }}
      </div>
    </section>

  {{ else }}
    <p>No content found.</p>
  {{ end }}
</main>
{{ end }}
